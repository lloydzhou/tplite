(function(b){b.Template=function(){var i={},h={"\\":"\\\\","\n":"\\n","\r":"\\r","{{":"');cb(","}}":");cb('","{%":"');","%}":"\ncb('"};return function(k,l,j){i[k=k||""]=i[k]||new Function("_","cb","with(_){"+("%}"+k+"{%").replace(/([\\\n\r]|{{|}}|{%|%})/g,function(n){return h[n]})+"}return cb");try{return l?i[k](l,j):i[k]}catch(m){return m}}};b.StringBuffer=function(){var h=[],i=function(j){h.push(j)};i.toString=function(){return h.join("")};return i};var c=[].unshift,g=[].slice,a=Object.assign;function f(j,i,h){return j instanceof Function&&j.apply(i,h)}var d={};b.Event=function(j,i,h){if(j instanceof Event){var k=d[h];return k&&f(k[i],k,[j])}else{h=j._index;if(h){d[h]=j;return{on:function(m,l){j[m]=l;return"tplite.Event(event, "+m+", "+h+")"},off:function(){Object.keys(j).map(function(l){if(l>0){delete j[l]}})}}}}};var e=0;b.Component=function(m,j,l,i){if(!(m instanceof Function)){var k=new b.Template();m=k(m)}function h(n,x){var r=++e;function u(A){var z=g.call(arguments,1);return s.on(++e,function(B){return f(j[A],y,z.concat(B))})}function p(A){var z=g.call(arguments,1);return !j[A]||f(j[A],y,z)}function q(z){y.state=n=a({},n,z);if(x&&n&&p("shouldUpdate")){s.off();o();requestAnimationFrame(function(){p("onUpdate");if(!t){p("onMount");t=true}})}return y}function o(){var z=new b.StringBuffer();m(a({self:y},n,w),z);if(x){return x.innerHTML=z.toString()}return z.toString()}function v(z){x=z;return q()}var t=false;var y={state:n,render:o,toString:o,mount:v,setState:q,trigger:p,root:x,_index:r};var s=b.Event(y);var w=Object.keys(j).reduce(function(A,z){A[z]=function(){c.call(arguments,z);return u.apply(y,arguments)};return A},{bind:u});p("onInit");return v(x)}return l?h(l,i):h}}(typeof exports==="undefined"?this.tplite||(this.tplite={}):exports));